# -*- coding: utf-8 -*-
"""NLP_displacy.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1wuCU7y2oB03IDU8bVHZvnHbofIFi6pr5
"""

import spacy
from spacy import displacy
from spacy import tokenizer
import re
import pandas as pd

nlp =spacy.load("en_core_web_sm")

google_text="Good morning. (Want to get California Today by email? Sign up.) The election of Donald J. Trump has left many California Latinos feeling on edge. But one Election Day outcome has given Latino groups that opposed Mr. Trump a measure of encouragement  â€”   the largest ever Congressional Hispanic Caucus. â€œItâ€™s historic what actually happened,â€ said Chuck Rocha, a political consultant. Latinos now make up nearly 40 percent of Californiaâ€™s population. Election analysts said strong Latino turnout played a crucial part in contests throughout the West, including the election of Catherine Cortez Masto, of Nevada, who will become the first Latina senator. As a result, the Hispanic caucus will grow from 26 to 31 members, with more than a third from California. Representative Linda SÃ¡nchez, the caucus chairwoman, said members had already asked for a meeting with Mr. Trump. â€œObviously, we are going to be pushing back on some of the really divisive and flawed policies that Donald Trump has discussed with respect to the Latino community,â€ said Ms. SÃ¡nchez, whose district includes southeastern Los Angeles. How much clout the lawmakers can wield on issues like immigration policy, a major concern, is uncertain given the Republican control of the White House and chambers of Congress. Nanette D. BarragÃ¡n, a Democrat who won an open seat representing a heavily Latino part of Los Angeles, said many of her constituents were fearful about Mr. Trumpâ€™s plans. â€œI just think having us at the table being a part of the conversation is so very important with a president like this,â€ she said. On the campaign trail, Mr. Trump said he has nothing against immigrants but vowed to deport all of those who are in the country illegally, an estimated 11 million people. Speaking in an interview on â€œ60 Minutesâ€ that was broadcast on Sunday, the   appeared to soften that stance, saying he would seek to deport just those undocumented immigrants with criminal backgrounds, and only up to three million of them. Salud Carbajal, who was elected to Congress from the Central Coast, said immigrant leaders have always supported efforts to deport people who have committed serious crimes. The question is how broadly a Trump administration would define the group. â€œAm I glad that he has lowered the number? Yes,â€ Mr. Carbajal said. But, he added, â€œThe devilâ€™s in the details. â€ â€¢ â€œThat is not our jobâ€: The Los Angeles police chief said he would not help deport immigrants under a Trump administration. [Los Angeles Times] â€¢ Climate change, immigration and education: How a President Trump could change California, profoundly. [Opinion | San Diego  ] â€¢ Loretta Sanchez went   on a failed bid for Californiaâ€™s United States Senate seat. Now, her next move is unclear. [Los Angeles Times] â€¢ Google and Facebook are taking aim at purveyors of fake news  after criticism that misinformation may have influenced the 2016 election. [The New York Times] â€¢ In a surprising reversal, Airbnb said it is ready to police its San Francisco hosts. [Mercury News] â€¢ Review: Appleâ€™s new MacBook Pro laptops are thin and powerful, but the jury is out on the usefulness of the Touch Bar. [The New York Times] â€¢ NASA and FEMA rehearsed for the unthinkable: an asteroid strike on Los Angeles. [The New York Times] â€¢ The University of California and California State University are considering raising tuition for the first time in six years. [Los Angeles Times] â€¢ A photographer hung out in corners of Alice Watersâ€™s celebrated restaurant Chez Panisse to create an intimate portrait of life there. [The New York Times] â€¢ Over the past year, the National Geographic Channel has turned itself inside out. â€œMarsâ€ is the latest example. [The New York Times] â€¢ Corey Seager, a shortstop for the Dodgers, was a unanimous choice for the National League Rookie of the Year. [The New York Times] People once thought Yosemiteâ€™s El Capitan was unclimbable. It was this month in 1958 that Warren Harding, a Californian, proved them wrong, ascending the   granite monolith for the first time. Mr. Harding, along with a series of partners, climbed the   Nose route in stages over the course of 18 months. They fixed ropes to the wall that hung to the ground and allowed the climbers to quickly return to where they had left off. Altogether, it took about 45 days of climbing to reach the top in freezing weather on Nov. 12. The feat redefined what was thought possible in the infant sport, and ushered in an era of big wall climbing. Mr. Harding continued rock climbing through the 1970s, making about 30 first ascents in Yosemite and becoming a legend of the sportâ€™s golden age. He died in 2002 at his home near Anderson in Shasta County at age 77. Today, the latest generation of elite climbers is taking the sport to new levels. Last year, Tommy Caldwell and Kevin Jorgeson scaled one of El Capitanâ€™s most difficult routes, the Dawn Wall  â€”   without the benefit of ropes, other than to catch their falls. Some considered it the hardest climb in the world. California Today goes live at 6 a. m. Pacific time weekdays. Tell us what you want to see: CAtoday@nytimes. com. The California Today columnist, Mike McPhate, is a   Californian  â€”   born outside Sacramento and raised in San Juan Capistrano. He lives in Davis. Follow him on Twitter. California Today is edited by Julie Bloom, who grew up in Los Angeles and attended U. C. Berkeley."


print(google_text)

spacy_doc =nlp(google_text)

pos_df = pd.DataFrame(columns=['token','pos_tag'])

for token in spacy_doc:
  pos_df =pos_df.append({'token':token.text ,'pos_tag':token.pos_}, ignore_index=True)

for word in spacy_doc.ents:
  print(word.text , word.label_)

displacy.render(spacy_doc,style="ent", jupyter=True)

goole_text_clean =re.sub(r'[^\w\s]' ,' ',google_text).lower()

goole_text_clean

spacy_doc_clean =nlp(goole_text_clean)

for word in spacy_doc_clean.ents:
  print(word.text , word.label_)

displacy.render(spacy_doc_clean,style="ent", jupyter=True)





pos_df_counts=pos_df.groupby(['token','pos_tag']).size().reset_index(name ='counts').sort_values(by='counts' ,ascending=False)